# DeviantPlayer

Основные возможности плеера - одновременное проигрывание нескольких плелистов, возможность проигрывание отдельных звуков.

## Интерфейс 

![Основной интерфейс](/img/screenshots/main_view.jpg)

1. Несколько плейлистов, у каждого свой список воспроизведения. 
1. Кнопки звуков, при нажатии на любую воспроизводится звук из заданного набора.
1. Настройки:
    * Настройка плейлистов. Выбор плейлистов, которые будут отображаться на основном экране. [1]
    * Настройка звуков. Выбор и настройка нужных набров звуков. [2]
    * Настройка локальной базы музыки.
    * Увеличить элементы интерфейса плейлистов.
    * Уменьшить элементы интерфейса плейлистов.
    * Скрыть списки воспроизведения во всех плейлистах.
    * Перемешать музыку в каждом плейлисте.
    * Включить/отключить плавный переход от паузы к проигрыванию (экспериментальная функция, иногда работает).
    
## Как пользоваться

### Организация файлов

Для начала нужно собрать музыку, которая вам нравится и рассортировать ее по папкам. Каждая папка - отдельный плейлист.

![Структура папок с музыкой](/img/screenshots/music_folder.JPG)

Звуки собираются аналогичным образом. Например есть три звука взрыва фаербола, их нужно поместить в папку и назвать, например, "фаербол". Таки папки с наборами звуков должны лежать в общей папке "!звуки".

![Структура папок со звуками](/img/screenshots/sounds_folder.JPG)

### Создание базы музыки

Так как из браузера невозможно получить полноценный доступ к файловой системе локального компьютера, то придется создать файл с базой музыки. Для этого есть два варианта - с помощью скрипта NODE.js, либо с помощью стандартных средств Windows.

#### При помощи NODE.js

  - Запустить консоль в папке со скриптом ([папка с плеером]/node/), где лежать два файла index.js и package.json
  - Установить требуемые модули - команда в консоли `npm install`  
  - Пока устанавливаются модули, настроить скрипт создания базы
    - Открыть в текстовом редакторе файл "index.js"
    - Отредактировать три строки в начале файла
      - `const sMusicPath = "D:/Cloud/DnD/Музыка"` - путь до папки, где содержатся папки с музыкой и звуками
      - `const sSoundsFolder = "!звуки"` - название папки, в которой лежат папки со звуками (папка должна лежать по адресу выше, например "D:/Cloud/DnD/Музыка/!звуки")
      - `const sDBpath = "../js/db.js"`- файл, куда будет сохранена база музыки. Он должен называться "db.js" и он должен находиться в папке с основными файлами плеера ([папка с плеером]/js/db.js)
  - После завершения установки запустить скрипт создания базы - `node index.js`
  
  При добавлении/удалении музыки из папок, нужно будет запускать этот скрипт (поседний шаг) снова, чтобы обновить базу.
  
#### При помощи cmd

  - Переместить файл "_create music DB.bat" в корень папки с музыкой, например, "D:/Cloud/DnD/Музыка/_create_music_DB.bat". 
  - Запустить этот файл двойным кликом.
  - Убедиться, что в папке есть (появился) файл "DB.txt"
  
  При добавлении/удалении музыки из папок, нужно будет запускать этот файл и загружать в плеер (будет показано далее).
  
  
### Загрузка базы музыки в плеер.

Если вы создавали базу с помощью NODE.js, то вам больше ничего не требуется. 

Если вы создавали базу с помощью bat-файла, то ее нужно загрузить в плеер вручную.

 - На основном экране плеера, в верхней панели нажать третью слева кнопку.
 - В открывшемся окне нажать кнопку "Загрузить файл" [10].
 - С помощью стандартного окна открытия файла выберите файл "DB.txt" из папки с музыкой.
 
 После каждого обновления бащы с музыкой, файл нужно будет загружать заново.
 
![Настройка локальной базы](/img/screenshots/memory.jpg)

Если вы хотя бы раз загрузили файл таким способом, то плеер не будет воспринимать базу, создаваемую с помощью Node.js. Чтобы плеер переключился на базу из Node.js необходимо удалить локальную базу, созданную с помощью загружаемого файла. Для этого нужно нажать кнопку "Удалить локальную копию" [11]. После этого нужно одновить страницу с плеером и он попытается загрузить данные из базы созданное NODE.js.

Кнопку "Очистить локальную базу полностью" [12] лучше не нажимать. Мало ли что может произойти.
  
### Настройка плейлистов и звуков

Для выбора плейлистов в верхней панели [3] нужно нажать кнопку с шестеренкой и откроется такое окно:

![Выбор плейлистов](/img/screenshots/smusic.jpg)

4. Строка с полным путем до корневой папки с музыкой. Скорее всего ее не стоит редактировать, если все работатет.
5. Список доступных плейлистов, цифра - количество файлов в папке. Выбранные галочкой будут отображены на основном экране [1].

Плейлисты можно сортировать на основном экране [1], перетаскивая их за название.

Для настройки звуков, в верхней панели [3] нужно нажать вторую кнопку (с нотами).

![Выбор и настройка звуков](/img/screenshots/sounds.jpg)

6. Полный путь до папки со звуками.
7. Список доступных коллекций звуков. Их можно сортировать перетаскиванием. Кроме того, звуки можно сортировать перетаскиванием в панели [2] на основном экране.
8. Настройка иконки. Для кнопок боковой панели звуков [2] можно назначать иконки. Для этого требуется в поле [8] ввести название иконки из шрифта ["font awesome"](http://fontawesome.io/icons/), чтобы посмотреть все иконки можно нажать на вопросительный знак справа от поля [8]. Если в поле введено название существующей иконки, она отобразиться рядом с названием (как смайлик на скриншоте)
9. Список файлов в конкретной папке звуков. При нажатии на кнопку в панели звуков [2], будет воспроизведен случайных звук из списка. Цифра справа от названия файла звука показывает, сколько раз звук будет встречаться в общем списке. Чем цифра больше, чем чаще будет проигрываться именно этот звук. 


В плеере используются сторонние библиотеки:

 - [Иконочный шрифт "font awesome"](http://fontawesome.io/icons/)
 - [Библиотека drug'n'drop "Sortable"](https://github.com/RubaXa/Sortable)







